---
# AUTO-GENERATED API DOCUMENTATION - DO NOT EDIT
title: formatting
description: API documentation for formatting
---

# formatting

## <ApiType type="Class" slug="format" symbolName="Format" /> Format

Class representing a structured output format for LLM responses.

A `Format` contains metadata needed to describe a structured output type
to the LLM, including the expected schema. This class is not instantiated directly,
but is created by calling `llm.format`, or is automatically generated by LLM
providers when a `Formattable` is passed to a call method.

Example:

  ```python
  from mirascope import llm

  class Book:
      title: str
      author: str

  print(llm.format(Book, mode="tool"))
  ```

**Bases:** 
<TypeLink type={{"type_str": "Generic[FormattableT]", "description": null, "kind": "generic", "base_type": {"type_str": "Generic", "description": null, "kind": "simple", "symbol_name": "Generic", "doc_url": "https://docs.python.org/3/library/typing.html#typing.Generic"}, "parameters": [{"type_str": "FormattableT", "description": null, "kind": "simple", "symbol_name": "FormattableT", "doc_url": "/docs/api/formatting#formattable-t"}], "doc_url": null}} />

<AttributesTable
  attributes={[
  {
    "name": "name",
    "type_info": {
      "type_str": "str",
      "description": null,
      "kind": "simple",
      "symbol_name": "str",
      "doc_url": null
    },
    "description": "The name of the response format."
  },
  {
    "name": "description",
    "type_info": {
      "type_str": "str | None",
      "description": null,
      "kind": "union",
      "base_type": {
        "type_str": "Union",
        "description": null,
        "kind": "simple",
        "symbol_name": "Union",
        "doc_url": null
      },
      "parameters": [
        {
          "type_str": "str",
          "description": null,
          "kind": "simple",
          "symbol_name": "str",
          "doc_url": null
        },
        {
          "type_str": "None",
          "description": null,
          "kind": "simple",
          "symbol_name": "None",
          "doc_url": null
        }
      ],
      "doc_url": null
    },
    "description": "A description of the response format, if available."
  },
  {
    "name": "schema",
    "type_info": {
      "type_str": "dict[str, object]",
      "description": null,
      "kind": "generic",
      "base_type": {
        "type_str": "dict",
        "description": null,
        "kind": "simple",
        "symbol_name": "dict",
        "doc_url": null
      },
      "parameters": [
        {
          "type_str": "str",
          "description": null,
          "kind": "simple",
          "symbol_name": "str",
          "doc_url": null
        },
        {
          "type_str": "object",
          "description": null,
          "kind": "simple",
          "symbol_name": "object",
          "doc_url": null
        }
      ],
      "doc_url": null
    },
    "description": "JSON schema representation of the structured output format."
  },
  {
    "name": "mode",
    "type_info": {
      "type_str": "FormattingMode",
      "description": null,
      "kind": "simple",
      "symbol_name": "FormattingMode",
      "doc_url": null
    },
    "description": "The decorator-provided mode of the response format. \n\nDetermines how the LLM call may be modified in order to extract the expected format."
  },
  {
    "name": "formatting_instructions",
    "type_info": {
      "type_str": "str | None",
      "description": null,
      "kind": "union",
      "base_type": {
        "type_str": "Union",
        "description": null,
        "kind": "simple",
        "symbol_name": "Union",
        "doc_url": null
      },
      "parameters": [
        {
          "type_str": "str",
          "description": null,
          "kind": "simple",
          "symbol_name": "str",
          "doc_url": null
        },
        {
          "type_str": "None",
          "description": null,
          "kind": "simple",
          "symbol_name": "None",
          "doc_url": null
        }
      ],
      "doc_url": null
    },
    "description": "The formatting instructions that will be added to the LLM system prompt.\n\nIf the format type has a `formatting_instructions` class method, the output of that\ncall will be used for instructions. Otherwise, instructions may be auto-generated\nbased on the formatting mode."
  },
  {
    "name": "formattable",
    "type_info": {
      "type_str": "type[FormattableT]",
      "description": null,
      "kind": "generic",
      "base_type": {
        "type_str": "type",
        "description": null,
        "kind": "simple",
        "symbol_name": "type",
        "doc_url": null
      },
      "parameters": [
        {
          "type_str": "FormattableT",
          "description": null,
          "kind": "simple",
          "symbol_name": "FormattableT",
          "doc_url": null
        }
      ],
      "doc_url": null
    },
    "description": "The `Formattable` type that this `Format` describes.\n\nWhile the `FormattbleT` typevar allows for `None`, a `Format` will never be\nconstructed when the `FormattableT` is `None`, so you may treat this as \na `RequiredFormattableT` in practice."
  }
]}
/>


## <ApiType type="Attribute" slug="formattable-t" symbolName="FormattableT" /> FormattableT

**Type:** <TypeLink type={{"type_str": "TypeVar('FormattableT', bound=BaseModel | None, default=None)", "description": null, "kind": "simple", "symbol_name": null, "doc_url": null}} />

Type variable for structured response format types.

This TypeVar represents the type of structured output format that LLM responses
can be parsed into, or None if no format is specified. 
If format is specified, it must extend Pydantic BaseModel.


## <ApiType type="Attribute" slug="formattable-t" symbolName="FormattableT" /> FormattableT

**Type:** <TypeLink type={{"type_str": "TypeVar('FormattableT', bound=BaseModel | None, default=None)", "description": null, "kind": "simple", "symbol_name": null, "doc_url": null}} />

Type variable for structured response format types.

This TypeVar represents the type of structured output format that LLM responses
can be parsed into, or None if no format is specified. 
If format is specified, it must extend Pydantic BaseModel.


## <ApiType type="Attribute" slug="formatting-mode" symbolName="FormattingMode" /> FormattingMode

**Type:** <TypeLink type={{"type_str": "Literal['strict', 'json', 'tool']", "description": null, "kind": "generic", "base_type": {"type_str": "Literal", "description": null, "kind": "simple", "symbol_name": "Literal", "doc_url": null}, "parameters": [{"type_str": "'strict'", "description": null, "kind": "simple", "symbol_name": "'strict'", "doc_url": null}, {"type_str": "'json'", "description": null, "kind": "simple", "symbol_name": "'json'", "doc_url": null}, {"type_str": "'tool'", "description": null, "kind": "simple", "symbol_name": "'tool'", "doc_url": null}], "doc_url": null}} />

Available modes for response format generation.

- "strict": Use strict mode for structured outputs, asking the LLM to strictly adhere
    to a given JSON schema. Not all providers or models support it, and may not be
    compatible with tool calling. When making a call using this mode, an 
    `llm.FormattingModeNotSupportedError` error may be raised (if "strict" mode is wholly
    unsupported), or an `llm.FeatureNotSupportedError` may be raised (if trying to use 
    strict along with tools and that is unsupported).

- "json": Use JSON mode for structured outputs. In contrast to strict mode, we ask the
    LLM to output JSON as text, though without guarantees that the model will output
    the expected format schema. If the provider has explicit JSON mode, it will be used;
    otherwise, Mirascope will modify the system prompt to request JSON output. May
    raise an `llm.FeatureNotSupportedError` if tools are present and the
    model does not support tool calling when using JSON mode.

- "tool": Use forced tool calling to structure outputs. Mirascope will construct an
    ad-hoc tool with the required json schema as tool args. When the LLM chooses that
    tool, it will automatically be converted from a `ToolCall` into regular response
    content (abstracting over the tool call). If other tools are present, they will
    be handled as regular tool calls.

Note: When `llm.format` is not used, the provider will automatically choose a mode at call time.


## <ApiType type="Class" slug="from-call-args" symbolName="FromCallArgs" /> FromCallArgs

A marker class for indicating that a field is a call argument.

This ensures that the LLM call does not attempt to generate this field. Instead, it
will populate this field with the call argument with a matching name.

This is useful for colocating e.g. validation of a generated output against and
input argument (such as the length of an output given a number input).

Example:

```
class Book(BaseModel):
    title: Annotated[str, llm.formatting.FromCallArgs()]
    author: Annotated[str, llm.formatting.FromCallArgs()]
    summary: str


@llm.call(
    provider="openai:completions",
    model_id="gpt-4o-mini",
    format=Book,
)
def summarize_book(title: str, author: str):
    return f"Summarize {title} by {author}."
```


## <ApiType type="Class" slug="partial" symbolName="Partial" /> Partial

Generate a new class with all attributes optionals.

**Bases:** 
<TypeLink type={{"type_str": "Generic[FormattableT]", "description": null, "kind": "generic", "base_type": {"type_str": "Generic", "description": null, "kind": "simple", "symbol_name": "Generic", "doc_url": "https://docs.python.org/3/library/typing.html#typing.Generic"}, "parameters": [{"type_str": "FormattableT", "description": null, "kind": "simple", "symbol_name": "FormattableT", "doc_url": "/docs/api/formatting#formattable-t"}], "doc_url": null}} />


## <ApiType type="Function" slug="format_fn" symbolName="format" /> format

Returns a `Format` that describes structured output for a Formattable type.

This function converts a Formattable type (e.g. Pydantic BaseModel) into a `Format`
object that describes how the object should be formatted. Calling `llm.format`
is optional, as all the APIs that expect a `Format` can also take the Formattable
type directly. However, calling `llm.format` is necessary in order to specify the
formatting mode that will be used.

The Formattable type may provide custom formatting instructions via a
`formatting_instructions(cls)` classmethod. If that method is present, it will be called,
and the resulting instructions will automatically be appended to the system prompt.

If no formatting instructions are present, then Mirascope may auto-generate instructions
based on the active format mode. To disable this behavior and all prompt modification,
you can add the `formatting_instructions` classmethod and have it return `None`.

<ParametersTable
  parameters={[
  {
    "name": "formattable",
    "type_info": {
      "type_str": "type[FormattableT] | None",
      "description": null,
      "kind": "union",
      "base_type": {
        "type_str": "Union",
        "description": null,
        "kind": "simple",
        "symbol_name": "Union",
        "doc_url": "https://docs.python.org/3/library/typing.html#typing.Union"
      },
      "parameters": [
        {
          "type_str": "type[FormattableT]",
          "description": null,
          "kind": "generic",
          "base_type": {
            "type_str": "type",
            "description": null,
            "kind": "simple",
            "symbol_name": "type",
            "doc_url": "https://docs.python.org/3/library/functions.html#type"
          },
          "parameters": [
            {
              "type_str": "FormattableT",
              "description": null,
              "kind": "simple",
              "symbol_name": "FormattableT",
              "doc_url": "/docs/api/formatting#formattable-t"
            }
          ],
          "doc_url": null
        },
        {
          "type_str": "None",
          "description": null,
          "kind": "simple",
          "symbol_name": "None",
          "doc_url": "https://docs.python.org/3/library/constants.html#None"
        }
      ],
      "doc_url": null
    }
  },
  {
    "name": "mode",
    "type_info": {
      "type_str": "FormattingMode",
      "description": null,
      "kind": "simple",
      "symbol_name": "FormattingMode",
      "doc_url": "/docs/api/formatting#formatting-mode"
    },
    "description": "The format mode to use, one of the following:\n- \"strict\": Use model strict structured outputs, or fail if unavailable.\n- \"tool\": Use forced tool calling with a special tool that represents a\n  formatted response.\n- \"json\": Use provider json mode if available, or modify prompt to request\n  json if not."
  }
]}
/>

<ReturnTable
  returnType={{
  "type_info": {
    "type_str": "Format[FormattableT] | None",
    "description": null,
    "kind": "union",
    "base_type": {
      "type_str": "Union",
      "description": null,
      "kind": "simple",
      "symbol_name": "Union",
      "doc_url": "https://docs.python.org/3/library/typing.html#typing.Union"
    },
    "parameters": [
      {
        "type_str": "Format[FormattableT]",
        "description": null,
        "kind": "generic",
        "base_type": {
          "type_str": "Format",
          "description": null,
          "kind": "simple",
          "symbol_name": "Format",
          "doc_url": "/docs/api/formatting#format"
        },
        "parameters": [
          {
            "type_str": "FormattableT",
            "description": null,
            "kind": "simple",
            "symbol_name": "FormattableT",
            "doc_url": "/docs/api/formatting#formattable-t"
          }
        ],
        "doc_url": null
      },
      {
        "type_str": "None",
        "description": null,
        "kind": "simple",
        "symbol_name": "None",
        "doc_url": "https://docs.python.org/3/library/constants.html#None"
      }
    ],
    "doc_url": null
  },
  "description": "A `Format` object describing the Formattable type."
}}
/>


## <ApiType type="Function" slug="resolve_format" symbolName="resolve_format" /> resolve_format

Resolve a `Format` (or None) from a possible `Format` or Formattable.

<ParametersTable
  parameters={[
  {
    "name": "formattable",
    "type_info": {
      "type_str": "type[FormattableT] | Format[FormattableT] | None",
      "description": null,
      "kind": "union",
      "base_type": {
        "type_str": "Union",
        "description": null,
        "kind": "simple",
        "symbol_name": "Union",
        "doc_url": "https://docs.python.org/3/library/typing.html#typing.Union"
      },
      "parameters": [
        {
          "type_str": "type[FormattableT]",
          "description": null,
          "kind": "generic",
          "base_type": {
            "type_str": "type",
            "description": null,
            "kind": "simple",
            "symbol_name": "type",
            "doc_url": "https://docs.python.org/3/library/functions.html#type"
          },
          "parameters": [
            {
              "type_str": "FormattableT",
              "description": null,
              "kind": "simple",
              "symbol_name": "FormattableT",
              "doc_url": "/docs/api/formatting#formattable-t"
            }
          ],
          "doc_url": null
        },
        {
          "type_str": "Format[FormattableT]",
          "description": null,
          "kind": "generic",
          "base_type": {
            "type_str": "Format",
            "description": null,
            "kind": "simple",
            "symbol_name": "Format",
            "doc_url": "/docs/api/formatting#format"
          },
          "parameters": [
            {
              "type_str": "FormattableT",
              "description": null,
              "kind": "simple",
              "symbol_name": "FormattableT",
              "doc_url": "/docs/api/formatting#formattable-t"
            }
          ],
          "doc_url": null
        },
        {
          "type_str": "None",
          "description": null,
          "kind": "simple",
          "symbol_name": "None",
          "doc_url": "https://docs.python.org/3/library/constants.html#None"
        }
      ],
      "doc_url": null
    }
  },
  {
    "name": "default_mode",
    "type_info": {
      "type_str": "FormattingMode",
      "description": null,
      "kind": "simple",
      "symbol_name": "FormattingMode",
      "doc_url": "/docs/api/formatting#formatting-mode"
    }
  }
]}
/>

<ReturnTable
  returnType={{
  "type_info": {
    "type_str": "Format[FormattableT] | None",
    "description": null,
    "kind": "union",
    "base_type": {
      "type_str": "Union",
      "description": null,
      "kind": "simple",
      "symbol_name": "Union",
      "doc_url": "https://docs.python.org/3/library/typing.html#typing.Union"
    },
    "parameters": [
      {
        "type_str": "Format[FormattableT]",
        "description": null,
        "kind": "generic",
        "base_type": {
          "type_str": "Format",
          "description": null,
          "kind": "simple",
          "symbol_name": "Format",
          "doc_url": "/docs/api/formatting#format"
        },
        "parameters": [
          {
            "type_str": "FormattableT",
            "description": null,
            "kind": "simple",
            "symbol_name": "FormattableT",
            "doc_url": "/docs/api/formatting#formattable-t"
          }
        ],
        "doc_url": null
      },
      {
        "type_str": "None",
        "description": null,
        "kind": "simple",
        "symbol_name": "None",
        "doc_url": "https://docs.python.org/3/library/constants.html#None"
      }
    ],
    "doc_url": null
  }
}}
/>


