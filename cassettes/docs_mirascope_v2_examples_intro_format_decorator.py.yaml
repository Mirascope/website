interactions:
  - request:
      body: '{"max_tokens":16000,"messages":[{"role":"user","content":"Please recommend a book in fantasy."}],"model":"claude-haiku-4-5","system":"Always respond to the user''s query using the __mirascope_formatted_output_tool__ tool for structured output.","tool_choice":{"type":"tool","name":"__mirascope_formatted_output_tool__","disable_parallel_tool_use":true},"tools":[{"name":"__mirascope_formatted_output_tool__","description":"Use this tool to extract data in Book format for a final response.","input_schema":{"properties":{"title":{"title":"Title","type":"string"},"author":{"title":"Author","type":"string"}},"required":["title","author"],"additionalProperties":false,"type":"object"}}]}'
      headers:
        accept:
          - application/json
        accept-encoding:
          - gzip, deflate
        anthropic-version:
          - '2023-06-01'
        connection:
          - keep-alive
        content-length:
          - '685'
        content-type:
          - application/json
        host:
          - api.anthropic.com
        user-agent:
          - Anthropic/Python 0.75.0
        x-api-key:
          - cached-http-with-invalid-key
        x-stainless-arch:
          - arm64
        x-stainless-async:
          - 'false'
        x-stainless-lang:
          - python
        x-stainless-os:
          - MacOS
        x-stainless-package-version:
          - 0.75.0
        x-stainless-read-timeout:
          - '600'
        x-stainless-retry-count:
          - '0'
        x-stainless-runtime:
          - CPython
        x-stainless-runtime-version:
          - 3.10.18
        x-stainless-timeout:
          - '600'
      method: POST
      uri: https://api.anthropic.com/v1/messages
    response:
      body:
        string: !!binary H4sIAAAAAAAAAwAAAP//dJFbT8MwDIX/SuXnTGrLprG+cZGQeJi4jI2LUGSl3hLaJCVxEGjqf0fdNBAgHu3v2Mc63oL1NbVQgWox1TTSaJo0Go8mozIvJ0WeFyDA1FCBjRuZF1ezsqHpqWvuL98WZ8uyWbnybgYC+KOjQUUx4oZAQPDt0MAYTWR0DAKUd0yOoXraHvTsfStTpIPLUCeZF9d2Gc8X85eH8vbk8f3luDua6fEFCHBohzkprQkYle9Irn2wyEy19Im7xHK3VA4rXZcYqi2w4d01C03ZHC1lfp2xpmxlXA0CMLH2ASq4Qg5GNdmNZ71OMULfPwuI7DsZCKN3P0/egUiviZwiqFxqWwFpF0C13btL9g25CNV0XApQqDRJFQjZeCd/KvIDD4T1f+wwOxhQp8lSwFZO7F/9Ny30b9oL+Mpq3xrPBEQKb0aRZENDGMPbagw19P0nAAAA//8DAERpfakoAgAA
      headers:
        CF-RAY:
          - 9a8d99738a2fdf82-SJC
        Connection:
          - keep-alive
        Content-Encoding:
          - gzip
        Content-Type:
          - application/json
        Date:
          - Thu, 04 Dec 2025 19:09:41 GMT
        Server:
          - cloudflare
        Transfer-Encoding:
          - chunked
        X-Robots-Tag:
          - none
        anthropic-organization-id:
          - bcf0d122-a6b6-40d4-873c-83762f5fb168
        anthropic-ratelimit-input-tokens-limit:
          - '50000'
        anthropic-ratelimit-input-tokens-remaining:
          - '50000'
        anthropic-ratelimit-input-tokens-reset:
          - '2025-12-04T19:09:41Z'
        anthropic-ratelimit-output-tokens-limit:
          - '10000'
        anthropic-ratelimit-output-tokens-remaining:
          - '10000'
        anthropic-ratelimit-output-tokens-reset:
          - '2025-12-04T19:09:41Z'
        anthropic-ratelimit-requests-limit:
          - '50'
        anthropic-ratelimit-requests-remaining:
          - '49'
        anthropic-ratelimit-requests-reset:
          - '2025-12-04T19:09:41Z'
        anthropic-ratelimit-tokens-limit:
          - '60000'
        anthropic-ratelimit-tokens-remaining:
          - '60000'
        anthropic-ratelimit-tokens-reset:
          - '2025-12-04T19:09:41Z'
        cf-cache-status:
          - DYNAMIC
        request-id:
          - req_011CVnB5JgjuQTcsETwiwKNK
        retry-after:
          - '21'
        strict-transport-security:
          - max-age=31536000; includeSubDomains; preload
        x-envoy-upstream-service-time:
          - '1420'
      status:
        code: 200
        message: OK
version: 1
